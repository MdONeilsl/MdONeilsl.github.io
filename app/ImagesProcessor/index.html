<!doctype html>
<html lang=en>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Images Processor is a web-based tool for Second Life® creators to resize and compress images for virtual world content creation.">
    <meta name="keywords"
        content="image processing tool, virtual world content creation, image resizing for Second Life, Second Life texture tool, content creation app">
    <title>Images Processor</title>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Images Processor",
        "operatingSystem": "Web",
        "applicationCategory": "Graphics & Design",
        "description": "A web-based tool for Second Life creators to resize and compress images for virtual world content creation, with advanced options for quality and performance.",
        "url": "https://yourwebsite.com"
    }
    </script>
    
</head>

<body>
    <link rel=stylesheet href=./css/styles.css>

    <h1>Images Processor</h1>
    <div class=container>
        <div id=drop-zone>Drop images here or click to select</div>
        <div class=status-container>
            <div id=status>0 images loaded</div>
        </div>
        <form id=settings>
            <div class=section>
                <h3>Resize Options</h3>
                <label title="Maximum power of 2 size for dimensions.">
                    <input type=checkbox id=Max-size checked> Max size:
                    <select id=max-power2>
                        <option value=2>2</option>
                        <option value=4>4</option>
                        <option value=8>8</option>
                        <option value=16>16</option>
                        <option value=32>32</option>
                        <option value=64>64</option>
                        <option value=128>128</option>
                        <option value=256>256</option>
                        <option value=512>512</option>
                        <option value=1024 selected>1024</option>
                        <option value=2048>2048</option>
                        <option value=4096>4096</option>
                        <option value=8192>8192</option>
                    </select>
                </label>
                <label title="Resize both width and height to the nearest power of 2, not exceeding max size.">
                    <input type=checkbox name=retype id=fix-power2 checked> Fix to power of 2
                </label>
                <div class=row>
                    <label title="Resize all images to the specified fixed size.">
                        <input type=checkbox name=retype id=fixed-size> Fixed size
                    </label>
                    <label title="Fixed width in pixels.">
                        Width: <input type=number id=fixed-width min=1 max=4096 step=1 disabled>
                    </label>
                    <label title="Fixed height in pixels.">
                        Height: <input type=number id=fixed-height min=1 max=4096 step=1 disabled>
                    </label>
                </div>
                <label title="Maintain aspect ratio when resizing to fixed size (fit within dimensions).">
                    <input type=checkbox id=aspect-lock disabled> Lock aspect ratio
                </label>
            </div>
            <div class=section>
                <h3>Output Options</h3>
                <div class=note>
                    Note: Perform a manual visual check of the desired compression using
                    <a href=https://mdoneilsl.github.io/app/ImageProcessor/ target=_blank>Image Processor</a>.
                </div>
                <label title="Template type: 'asset' disables WebP.">
                    Template:
                    <select id=template>
                        <option value=web>Web</option>
                        <option value=asset>Asset</option>
                    </select>
                </label>
                <div class=row>
                    Format:
                    <div title="Output image format." class=format-options>
                        <label><input type=radio name=format value=jpeg id=format-jpg> JPG</label>
                        <label><input type=radio name=format value=png id=format-png checked> PNG</label>
                        <label><input type=radio name=format value=webp id=format-webp> WebP</label>
                    </div>
                    <label title="Quality for JPG and WebP (0-100).">
                        Quality: <input type=range id=quality min=0 max=100 value=100>
                        <span id=quality-value>100</span>
                    </label>
                </div>
                <label title="Lossless compression for WebP (may not be fully lossless in all browsers).">
                    <input type=checkbox id=lossless disabled> Lossless (WebP)
                </label>
            </div>
            <div class="section pic">
                <h3>Pica Options <button type=button class=help-button id=pica-help>?</button></h3>
                <div class=warning>
                    Warning: All Pica options are exposed due to the large variety in browser models, versions, and
                    personal browser settings. Not all combinations will work for everyone.
                </div>
                <div class=block>
                    <label title="Pica resize filter.">
                        Filter:
                        <select id=pica-filter>
                            <option value=mks2013>MKS2013 (default)</option>
                            <option value=lanczos>Lanczos</option>
                            <option value=hamming>Hamming</option>
                            <option value=box>Box</option>
                        </select>
                    </label>
                </div>
                <div class=block>
                    <label title="Unsharp amount (>=0, usually 100-200).">
                        Unsharp Amount: <input type=number id=unsharp-amount min=0 step=1 value=0>
                    </label>
                    <label title="Unsharp radius (0.5-2.0).">
                        Unsharp Radius: <input type=number id=unsharp-radius min=0.5 max=2 step=0.1 value=0.5>
                    </label>
                    <label title="Unsharp threshold (0-255).">
                        Unsharp Threshold: <input type=number id=unsharp-threshold min=0 max=255 step=1 value=0>
                    </label>
                </div>
                <div class=blok>
                    <label title="Preserve alpha channel if present.">
                        <input type=checkbox id=alpha checked> Preserve Alpha
                    </label>
                </div>
                <div class=block>
                    <label title="Tile size for processing.">
                        Tile: <input type=number id=tile value=1024 min=1>
                    </label>
                    <label title="Idle timeout for workers (ms).">
                        Idle: <input type=number id=idle value=2000 min=0>
                    </label>
                    <label title="Max concurrency (workers).">
                        Concurrency: <input type=number id=concurrency value=4 min=1 max=16>
                    </label>
                </div>
                <div class=block>
                    <label title="Use web workers for processing.">
                        <input type=checkbox id=use-ww checked> Use Web Workers
                    </label>
                    <label title="Use WASM if available.">
                        <input type=checkbox id=use-wasm checked> Use WASM
                    </label>
                    <label title="Use JS fallback.">
                        <input type=checkbox id=use-js checked> Use JS
                    </label>
                    <label title="Use createImageBitmap if available (buggy in some browsers, disabled by default).">
                        <input type=checkbox id=use-cib> Use CID
                    </label>
                </div>
            </div>
            <div id=progress>
                <div id=prog-bar></div>
                <span id=prog-text>0%</span>
            </div>
            <div class=button-group>
                <button type=button id=reset>Reset Settings</button>
                <button type=button id=process disabled>Process and Download</button>
            </div>
        </form>
        <div id=error></div>
    </div>

    <footer class="section" style="margin-top: auto; text-align: center; font-size: 0.9em; color: #555;">
        <p>© 2025 Images Processor. All rights reserved.</p>
        <p>Images Processor is a tool designed for Second Life® users and is not affiliated with or sponsored by Linden
            Research, Inc.</p>
        <p>Built with <a href="https://github.com/nodeca/pica">Pica</a> (MIT License) by <a
                href="https://github.com/nodeca">Nodeca</a> and <a href="https://stuk.github.io/jszip/">JSZip</a> (MIT
            License) by <a href="https://github.com/Stuk">Stuart Knightley</a>. See <a href="/licenses">license
                details</a>.</p>
            <p>Developed by MdONeil under the <a href="https://www.gnu.org/licenses/gpl-3.0.html">GNU v3 License</a>.
            Contact:
            <a href="secondlife:///app/agent/ae929a12-297c-45be-9748-562ee17e937e/about">MdONeil</a>
        </p>
    </footer>



    <dialog id=pica-dialog>
        <h2>Pica Options</h2>
        <p>Pica is a high-quality image resizing library. These options control how images are processed:</p>
        <ul>
            <li><strong>Filter:</strong> Choose the algorithm for resizing (e.g., Lanczos for sharp results).</li>
            <li><strong>Unsharp:</strong> Adjusts sharpness after resizing (amount, radius, threshold).</li>
            <li><strong>Alpha:</strong> Preserves transparency if present in the original image.</li>
            <li><strong>Tile:</strong> Size of image chunks for processing (affects memory usage).</li>
            <li><strong>Idle:</strong> Timeout for web workers (ms) to free resources.</li>
            <li><strong>Concurrency:</strong> Number of simultaneous processing tasks.</li>
            <li><strong>Web Workers, WASM, JS, CID:</strong> Enable/disable specific processing methods for
                compatibility and performance.</li>
        </ul>
        <p>Not all options work in every browser due to variations in support and settings.</p>
        <button type=button onclick='document.getElementById("pica-dialog").close()'>Close</button>
    </dialog>

    <script src=https://cdn.jsdelivr.net/npm/pica/dist/pica.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/jszip/dist/jszip.min.js></script>
    <script src=./js/script.js></script>

</body>

</html>
